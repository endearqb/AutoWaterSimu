## 目标

* 分析窗口横向扩大到接近整个浏览器宽度。

* 在“空间剖面”和“连接线浓度”两个 tab 中，将柱状图与时序图并排左右显示，宽度不足时自动改为上下排列。

* 取消时序图的默认隐藏（默认显示），保留时间范围滑块以便交互。

* 优化节点选择与指标选择的每行选项数量，使在宽屏下更高密度、在窄屏下更易读。

## 影响范围

* 对话框尺寸：`frontend/src/components/legacy-analysis/AnalysisDialog.tsx` 与各分析按钮传参。

* 面板布局：`SpatialProfilePanel.tsx` 与 `EdgeConcentrationPanel.tsx`。

* 时序图展示：`TimeSeriesChart.tsx` 与 `EdgeTimeSeriesChart.tsx` 的展示开关及滑块显示。

## 具体修改

### 扩大分析窗口宽度

* 将分析对话框尺寸设置为近全屏：

  * 在各按钮处将 `size="xl"` 改为 `size="full"`：

    * `ASM1AnalysisButton.tsx:67`、`ASM1SlimAnalysisButton.tsx:74`、`ASM3AnalysisButton.tsx:74`。

  * 如需统一默认值，也可将 `AnalysisDialog.tsx` 的默认 `size` 从 `xl` 改为 `full`（`AnalysisDialog.tsx:25`），依旧允许各按钮覆盖。

* 保持高度滚动：`Dialog.Content maxH="90vh"` 与 `Dialog.Body overflow="auto"` 已存在（`AnalysisDialog.tsx:32-38`）。

### 空间剖面面板（柱状图 + 时序图并排）

* 默认显示时序图：将 `showTimeSeries` 初始值改为 `true`（`SpatialProfilePanel.tsx:39`）。

* 改为响应式并排布局：

  * 使用 `SimpleGrid columns={{ base: 1, md: 2 }} spacing={6}` 包含两个区域：左侧柱状图、右侧时序图；在窄屏（base）显示为上下，md 及以上并排。

  * 若仍保留“隐藏/显示时序图”按钮，则让网格根据开关动态变为 `columns={{ base: 1, md: showTimeSeries ? 2 : 1 }}`。

* 时序图内开启时间范围滑块：将传入 `showTimeRangeSlider` 设置为 `true`（`SpatialProfilePanel.tsx:280-281`）。

* 优化选择区每行项数：

  * 将节点与指标选择由固定列数改为自适应密度，例如：`<SimpleGrid minChildWidth="160px" gap={2}>`，在宽屏自动增加每行项数、窄屏自动减少（替换 `SpatialProfilePanel.tsx:146-153` 与 `163-170`）。

### 连接线浓度面板（柱状图 + 时序图并排）

* 默认显示连接线时序图：将 `showEdgeTimeSeries` 初始值改为 `true`（`EdgeConcentrationPanel.tsx:46`）。

* 改为响应式并排布局：

  * 使用 `SimpleGrid columns={{ base: 1, md: 2 }} spacing={6}` 包含左侧柱状图、右侧时序图；在窄屏上下、md 及以上并排。

  * 若保留开关，则同样使用 `columns={{ base: 1, md: showEdgeTimeSeries ? 2 : 1 }}` 动态控制。

* 时序图内开启时间范围滑块：将传入 `showTimeRangeSlider` 设置为 `true`（`EdgeConcentrationPanel.tsx:310-311`）。

* 优化选择区每行项数：

  * 连接线选择改为更高密度：使用 `minChildWidth`（替换 `EdgeConcentrationPanel.tsx:161-176`）。

  * 指标选择同样改为 `minChildWidth`（替换 `EdgeConcentrationPanel.tsx:186-193`）。

### 时序图组件（保持兼容）

* `TimeSeriesChart.tsx` 与 `EdgeTimeSeriesChart.tsx` 保持容器 `ResponsiveContainer` 宽高百分比不变，保证在并排布局下自适应。

* 当选择为空时，继续显示提示，不影响并排布局（参考 `TimeSeriesChart.tsx:135-145` 与 `EdgeTimeSeriesChart.tsx:170-179`）。

## 验证

* 运行类型检查：`cd frontend; npx tsc --noEmit`。

* 本地启动前端，打开分析窗口，验证：

  * 对话框接近全屏宽度。

  * “空间剖面”“连接线浓度”中柱状图与时序图在宽屏并排、窄屏上下。

  * 时序图默认显示且可用时间范围滑块。

  * 节点与指标选择在宽屏每行更多项，窄屏自动换行。

## 风险与回退

* 改动仅涉及布局和默认展示开关，不影响计算逻辑；如需回退，只需恢复按钮 `size` 与面板初始布尔值并还原 `SimpleGrid` 设置。

