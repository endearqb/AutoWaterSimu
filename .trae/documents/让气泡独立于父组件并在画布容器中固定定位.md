## 问题与目标
- 现状：气泡仍在面板内，未独立布局。
- 目标：气泡在 React Flow 画布容器内以固定定位显示，向上、以按钮为中心的圆弧排列，且不撑大父组件。

## 技术方案（Portal + 固定定位）
- 改用 Portal 将气泡渲染到画布根节点（`.react-flow`），实现与父组件布局分离。
- 使用触发按钮的 `ref` 获取其 `getBoundingClientRect()`，计算按钮中心坐标。
- 在 Portal 中渲染一个 `Box`，`position="fixed"`，并以按钮中心为基点放置圆弧上的选项按钮。
- 保持样式透明、无边框，保留现有的选项按钮风格与参数更新逻辑。

## 关键实现
1. 触发按钮添加 `ref`：
```tsx
const stepsBtnRef = useRef<HTMLButtonElement|null>(null);
const resampleBtnRef = useRef<HTMLButtonElement|null>(null);
const [isStepsOpen, setStepsOpen] = useState(false);
const [isResampleOpen, setResampleOpen] = useState(false);
```
2. 获取锚点坐标（相对视口）：
```ts
function getAnchorCenter(el: HTMLElement|undefined|null) {
  if (!el) return { x: 0, y: 0 };
  const r = el.getBoundingClientRect();
  return { x: r.left + r.width/2, y: r.top + r.height/2 };
}
```
3. Portal 到画布容器并固定定位：
```tsx
<Portal container={document.querySelector('.react-flow') || document.body}>
  {isStepsOpen && (
    <Box position="fixed" left={`${anchor.x}px`} top={`${anchor.y - 8}px`}>
      {/* 相对容器 + 绝对定位圆弧按钮 */}
    </Box>
  )}
</Portal>
```
- `left/top` 设置为按钮中心附近（向上偏移少量），容器内部继续用 `computeArcPositions` 摆放。
- 两组按钮分别使用对应 `ref` 与状态独立控制。

## 代码改动范围
- 文件：`frontend/src/components/Flow/inspectorbar/SimulationActionPlate.tsx`
- 替换现有 Popover.Content 为 Portal 固定定位的圆弧布局；触发按钮由 `Popover.Trigger` 改为普通 `Button` + `ref` + `onClick`。
- 保留现有 `getToggleButtonStyles` 与 `validateAndUpdateParameters`。

## 验证
- 类型检查：`cd frontend; npx tsc --noEmit`。
- 运行预览：
  - 点击 `steps`/`resample` 后气泡在按钮上方显示，位置随滚动保持正确（固定定位）；
  - 气泡层级覆盖画布、不撑大面板；
  - 点击选项正确更新参数与激活态；点击外部区域或再次点击按钮关闭气泡。

## 说明
- 继续使用 `.react-flow` 作为 Portal 容器，若未来容器类名变化可改为传入 `ref`。
- 如需增加关闭交互，可在 Portal 内添加透明遮罩或监听 `blur`/`pointerdown` 事件以关闭。