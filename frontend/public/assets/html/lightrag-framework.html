<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>交互式分析报告：LightRAG 框架</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals (Slate) with a Blue accent -->
    <!-- Application Structure Plan: A single-page application with a top navigation bar to switch between thematic sections: "概述" (Overview), "RAG 流水线" (RAG Pipeline), "技术栈" (Tech Stack), "部署" (Deployment), and "总结" (Summary). This structure breaks down the dense report into logical, digestible themes. The RAG Pipeline section uses an interactive flowchart for progressive disclosure of complex processes. The Tech Stack uses a tabbed interface for easy exploration. The goal is to transform a linear document into a non-linear, user-driven exploration tool, enhancing comprehension and engagement. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Core Features -> Goal: Inform -> Viz: Icon Cards -> Interaction: Hover/Click -> Justification: Quick, scannable summary -> Method: HTML/CSS/JS.
        - Report Info: RAG Process -> Goal: Explain Process -> Viz: Interactive Flowchart -> Interaction: Click nodes for details -> Justification: Simplifies complex workflow -> Method: HTML/CSS/JS.
        - Report Info: Technology Stack -> Goal: Organize -> Viz: Tabbed Component Explorer -> Interaction: Click tabs to switch content -> Justification: Easy comparison and focused view -> Method: HTML/CSS/JS.
        - Report Info: Deployment Options -> Goal: Compare -> Viz: Simplified Diagrams -> Interaction: Click for text -> Justification: Makes abstract concepts tangible -> Method: HTML/CSS/JS.
        - Report Info: Pros & Cons -> Goal: Evaluate -> Viz: Bar Chart -> Interaction: Hover for tooltips -> Justification: Visually quantifies qualitative assessment -> Method: Chart.js.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: #f8fafc;
        }
        .nav-item {
            transition: all 0.2s ease-in-out;
        }
        .nav-item.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .flowchart-node {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .flowchart-node:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
         .flowchart-line {
            background-color: #cbd5e1;
            position: absolute;
            z-index: -1;
        }
        .chart-container {
            position: relative; 
            width: 100%; 
            max-width: 800px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 400px;
            max-height: 50vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-40 shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl md:text-2xl font-bold text-slate-900">LightRAG 框架交互式分析</h1>
                <nav class="hidden md:flex items-center space-x-2 lg:space-x-4">
                    <a href="#overview" class="nav-item text-slate-600 hover:text-blue-500 font-medium pb-1 border-b-2 border-transparent">概述</a>
                    <a href="#pipeline" class="nav-item text-slate-600 hover:text-blue-500 font-medium pb-1 border-b-2 border-transparent">RAG 流水线</a>
                    <a href="#stack" class="nav-item text-slate-600 hover:text-blue-500 font-medium pb-1 border-b-2 border-transparent">技术栈</a>
                    <a href="#deployment" class="nav-item text-slate-600 hover:text-blue-500 font-medium pb-1 border-b-2 border-transparent">部署</a>
                    <a href="#summary" class="nav-item text-slate-600 hover:text-blue-500 font-medium pb-1 border-b-2 border-transparent">总结</a>
                </nav>
                 <div class="md:hidden">
                    <select id="mobile-nav" class="bg-white border border-slate-300 rounded-md p-2">
                        <option value="overview">概述</option>
                        <option value="pipeline">RAG 流水线</option>
                        <option value="stack">技术栈</option>
                        <option value="deployment">部署</option>
                        <option value="summary">总结</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-12">

        <section id="overview-section" class="content-section active">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">轻量级、可扩展的 RAG 框架</h2>
                <p class="max-w-3xl mx-auto text-lg text-slate-600">LightRAG 旨在简化 RAG 应用的开发、评估和优化过程。它强调模块化和透明度，让开发者能够轻松定制和替换流水线的各个组件。</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                    <h3 class="font-bold text-lg mb-2 text-blue-600">混合检索</h3>
                    <p class="text-slate-600">结合知识图谱（KG）和传统向量检索，提供更精确、更具上下文关联性的信息。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                    <h3 class="font-bold text-lg mb-2 text-blue-600">流水线设计</h3>
                    <p class="text-slate-600">将复杂的 RAG 流程分解为一系列可配置、可重用的组件。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                    <h3 class="font-bold text-lg mb-2 text-blue-600">模型无关</h3>
                    <p class="text-slate-600">通过适配器支持多种大语言模型，如 OpenAI, Gemini, Ollama 等。</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                    <h3 class="font-bold text-lg mb-2 text-blue-600">端到端工程化</h3>
                    <p class="text-slate-600">提供 API 服务、前端界面、Docker 和 Kubernetes 部署方案。</p>
                </div>
            </div>
        </section>

        <section id="pipeline-section" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">交互式 RAG 流水线</h2>
                <p class="max-w-3xl mx-auto text-lg text-slate-600">点击下方流程图中的节点，探索 RAG 从数据处理到生成答案的每一个环节。这是一个逐步揭示信息的过程，帮助您理解其核心工作流。</p>
            </div>
            
            <div class="lg:flex lg:space-x-8">
                <div class="lg:w-2/3">
                     <div id="flowchart-container" class="relative flex flex-col md:flex-row justify-around items-center space-y-8 md:space-y-0 md:space-x-8 p-4">
                        <div class="flowchart-node w-full md:w-1/3 text-center bg-white p-4 rounded-lg shadow-lg border-2 border-blue-500" data-step="ingestion">
                            <h4 class="font-bold text-xl">1. 数据处理 (Ingestion)</h4>
                            <p class="text-sm text-slate-500 mt-1">知识转化</p>
                        </div>
                         <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden md:block">
                            <span class="text-4xl text-slate-400">→</span>
                        </div>
                        <div class="md:hidden text-4xl text-slate-400">↓</div>

                        <div class="flowchart-node w-full md:w-1/3 text-center bg-white p-4 rounded-lg shadow-lg border-2 border-transparent" data-step="retrieval">
                            <h4 class="font-bold text-xl">2. 混合检索 (Retrieval)</h4>
                             <p class="text-sm text-slate-500 mt-1">信息召回</p>
                        </div>
                         <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 hidden md:block">
                            <span class="text-4xl text-slate-400" style="margin-left: 110%;">→</span>
                        </div>
                        <div class="md:hidden text-4xl text-slate-400">↓</div>

                        <div class="flowchart-node w-full md:w-1/3 text-center bg-white p-4 rounded-lg shadow-lg border-2 border-transparent" data-step="generation">
                            <h4 class="font-bold text-xl">3. 答案生成 (Generation)</h4>
                             <p class="text-sm text-slate-500 mt-1">内容创造</p>
                        </div>
                    </div>
                </div>

                <div id="pipeline-details" class="lg:w-1/3 mt-8 lg:mt-0 bg-white p-6 rounded-xl shadow-lg border border-slate-200/80 min-h-[250px]">
                </div>
            </div>
        </section>

        <section id="stack-section" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">技术栈浏览器</h2>
                <p class="max-w-3xl mx-auto text-lg text-slate-600">LightRAG 整合了一系列现代化的技术。点击下方标签页，查看其在不同层面的技术选型和实现。</p>
            </div>
            <div>
                <div class="border-b border-slate-200 mb-6">
                    <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                        <button class="tech-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg border-blue-500 text-blue-600" data-tech="backend">后端</button>
                        <button class="tech-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tech="frontend">前端</button>
                        <button class="tech-tab whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300" data-tech="database">数据库</button>
                    </nav>
                </div>
                <div id="tech-content" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
            </div>
        </section>
        
        <section id="deployment-section" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">部署与运维</h2>
                <p class="max-w-3xl mx-auto text-lg text-slate-600">项目提供了完整的容器化和编排方案，极大地简化了从开发到生产的部署流程。</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200/80">
                    <h3 class="text-2xl font-bold mb-4 text-slate-800">Docker Compose</h3>
                    <p class="text-slate-600 mb-6">用于本地快速部署。一键启动整个应用栈，包括 API 服务、前端以及所需的数据库（如 Neo4j, Milvus, Redis），极大地简化了本地开发和测试环境的搭建。</p>
                    <div class="bg-slate-100 p-4 rounded-lg text-center">
                        <p class="font-mono text-sm text-slate-700">[API Service] ↔ [Frontend] ↔ [Databases]</p>
                        <p class="text-xs text-slate-500 mt-2">简化版容器链接示意图</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200/80">
                    <h3 class="text-2xl font-bold mb-4 text-slate-800">Kubernetes (Helm)</h3>
                    <p class="text-slate-600 mb-6">用于生产环境部署。提供了完整的 Helm Chart，这是在 Kubernetes 上部署应用的标准方式。并利用 KubeBlocks 来简化在 K8s 上管理数据库的操作。</p>
                     <div class="bg-slate-100 p-4 rounded-lg text-center">
                        <p class="font-mono text-sm text-slate-700">[Service] → [Pods] → [PVC]</p>
                        <p class="text-xs text-slate-500 mt-2">简化版 K8s 资源关系示意图</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="summary-section" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">总结与评价</h2>
                <p class="max-w-3xl mx-auto text-lg text-slate-600">LightRAG 在算法方案和工程实践之间取得了很好的平衡，为开发者提供了坚实的基础。下图展示了其在不同维度的成熟度评估。</p>
            </div>
             <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200/80">
                <div class="chart-container">
                    <canvas id="summaryChart"></canvas>
                </div>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {

            const pipelineData = {
                ingestion: {
                    title: '1. 数据处理 (Ingestion)',
                    description: '这是 RAG 的第一步，处理原始文档并将其转化为可检索的知识。',
                    steps: [
                        { title: '文档加载与解析', detail: '负责加载各种格式的文档（如 PDF, TXT, MD）。' },
                        { title: '文本分块', detail: '将长文本切分成适合嵌入（Embedding）的较小文本块。' },
                        { title: '知识图谱构建', detail: '使用大语言模型从文本块中提取实体（Nodes）和关系（Edges），并存入图数据库。' },
                        { title: '向量嵌入与存储', detail: '对文本块生成向量表示，并将其与文本块本身存入向量数据库。' }
                    ]
                },
                retrieval: {
                    title: '2. 混合检索 (Retrieval)',
                    description: '当用户提出问题时，会并行或串行地执行多种检索策略，以获取最相关的上下文信息。',
                    steps: [
                        { title: '向量检索', detail: '将用户查询嵌入后，在向量数据库中进行相似度搜索，召回 Top-K 相关的文本块。' },
                        { title: '知识图谱检索', detail: '从用户问题中识别实体，在图数据库中遍历相关子图，并将其序列化为文本。' },
                        { title: '信息融合与重排', detail: '合并从两种检索方式获得的信息，并通过重排模型优化排序，选择最相关的信息。' }
                    ]
                },
                generation: {
                    title: '3. 答案生成 (Generation)',
                    description: '最后一步是将检索到的上下文信息和原始问题一起，交给大语言模型生成最终的答案。',
                    steps: [
                        { title: '构建提示词', detail: '使用预设的模板，将检索到的上下文和用户问题组装成一个完整的提示词。' },
                        { title: '调用大语言模型', detail: '将构建好的提示词发送给选定的大语言模型，支持流式输出。' },
                        { title: '答案生成与后处理', detail: '模型生成答案，系统可能会解析出引用来源等信息，并返回给用户。' }
                    ]
                }
            };

            const techData = {
                backend: [
                    { name: 'FastAPI', description: '用于构建异步、高性能的 API 服务。' },
                    { name: 'Gunicorn', description: '用于多进程部署，处理并发请求。' },
                    { name: 'Python', description: '核心后端开发语言。' }
                ],
                frontend: [
                    { name: 'React', description: '用于构建用户界面的 JavaScript 库。' },
                    { name: 'TypeScript', description: '为 JavaScript 添加了类型系统，增强代码健壮性。' },
                    { name: 'Vite', description: '现代化的前端构建工具，提供极速的开发体验。' },
                    { name: 'Tailwind CSS', description: '一个功能优先的 CSS 框架，用于快速构建自定义设计。' },
                    { name: 'Zustand', description: '一个轻量、简洁的 React 状态管理库。' },
                    { name: 'Cytoscape.js', description: '用于知识图谱的可视化和分析。' }
                ],
                database: [
                    { name: 'Neo4j', description: '领先的图数据库，用于存储和查询知识图谱。' },
                    { name: 'Milvus / Qdrant', description: '高性能的向量数据库，用于存储和检索嵌入向量。' },
                    { name: 'Redis', description: '用作缓存或键值存储，提升性能。' },
                    { name: 'FAISS', description: 'Facebook AI 的高效相似度搜索库，可用于本地向量检索。' }
                ]
            };

            function updatePipelineDetails(step) {
                const data = pipelineData[step];
                const container = document.getElementById('pipeline-details');
                if (!data) {
                    container.innerHTML = '';
                    return;
                }
                let content = `<h3 class="text-2xl font-bold mb-4 text-slate-800">${data.title}</h3><p class="text-slate-600 mb-5">${data.description}</p><ul class="space-y-4">`;
                data.steps.forEach(s => {
                    content += `<li class="p-3 bg-slate-100/80 rounded-lg"><strong class="text-slate-700">${s.title}</strong><p class="text-sm text-slate-500 mt-1">${s.detail}</p></li>`;
                });
                content += '</ul>';
                container.innerHTML = content;
            }

            const flowchartNodes = document.querySelectorAll('.flowchart-node');
            flowchartNodes.forEach(node => {
                node.addEventListener('click', function() {
                    flowchartNodes.forEach(n => n.classList.remove('border-blue-500'));
                    this.classList.add('border-blue-500');
                    updatePipelineDetails(this.dataset.step);
                });
            });

            updatePipelineDetails('ingestion');

            function updateTechContent(techCategory) {
                const data = techData[techCategory];
                const container = document.getElementById('tech-content');
                if (!data) {
                    container.innerHTML = '';
                    return;
                }
                let content = '';
                data.forEach(t => {
                    content += `<div class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                        <h4 class="font-bold text-lg mb-2 text-blue-600">${t.name}</h4>
                        <p class="text-slate-600">${t.description}</p>
                    </div>`;
                });
                container.innerHTML = content;
            }
            
            const techTabs = document.querySelectorAll('.tech-tab');
            techTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    techTabs.forEach(t => {
                        t.classList.remove('border-blue-500', 'text-blue-600');
                        t.classList.add('border-transparent', 'text-slate-500');
                    });
                    this.classList.add('border-blue-500', 'text-blue-600');
                    this.classList.remove('border-transparent', 'text-slate-500');
                    updateTechContent(this.dataset.tech);
                });
            });

            updateTechContent('backend');


            const sections = document.querySelectorAll('.content-section');
            const navItems = document.querySelectorAll('.nav-item');
            const mobileNav = document.getElementById('mobile-nav');

            function setActiveSection(hash) {
                const targetHash = hash.substring(1);
                sections.forEach(section => {
                    if (section.id === `${targetHash}-section`) {
                        section.classList.add('active');
                    } else {
                        section.classList.remove('active');
                    }
                });

                navItems.forEach(item => {
                    if (item.getAttribute('href') === hash) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
                if (mobileNav.value !== targetHash) {
                    mobileNav.value = targetHash;
                }
            }

            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const hash = this.getAttribute('href');
                    setActiveSection(hash);
                    window.history.pushState(null, null, hash);
                });
            });
            
            mobileNav.addEventListener('change', function(e) {
                 const hash = '#' + e.target.value;
                 setActiveSection(hash);
                 window.history.pushState(null, null, hash);
            });


            const initialHash = window.location.hash || '#overview';
            setActiveSection(initialHash);

            const ctx = document.getElementById('summaryChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['方案先进性', '工程化程度', '可扩展性', '文档与示例', '内置评估模块', '前沿策略集成'],
                    datasets: [{
                        label: '成熟度评估 (满分10)',
                        data: [9, 9, 8, 8, 3, 5],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(239, 68, 68, 0.7)',
                            'rgba(245, 158, 11, 0.7)'
                        ],
                        borderColor: [
                            'rgba(59, 130, 246, 1)',
                            'rgba(59, 130, 246, 1)',
                            'rgba(59, 130, 246, 1)',
                            'rgba(59, 130, 246, 1)',
                            'rgba(239, 68, 68, 1)',
                            'rgba(245, 158, 11, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + ' / 10';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

        });
    </script>

</body>
</html>
