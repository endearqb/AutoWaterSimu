### **核心建模界面 (前端)** (预估：4-5天，与原计划一致)

**目标**：实现完整的、纯前端的流程图拖拽建模和参数配置功能，并建立健壮的客户端状态管理。

| 任务 (Task)                  | 细化执行步骤                                                                                                                                                                             | 产出/验证标准                                                                                      |                                               |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | --------------------------------------------- |
| **2.1. 布局与状态管理 (Zustand)** | 1. 创建三栏式布局组件 `Layout.tsx` (侧边栏、画布、属性检查器)。 2. **优化状态管理**: 创建 `frontend/src/stores/flowStore.ts`。使用 Zustand 的 `create` 方法构建一个包含 `nodes`, `edges`, `selectedNode` 以及相关操作函数的全局 Store 。 | 3. 将 React Flow 的 `onNodesChange`, `onEdgesChange`, `onConnect` 等处理器也放入 Store 中，实现逻辑的完全集中化 。 | 页面呈现三栏布局。所有流程图相关的状态和操作均由 `useFlowStore` 统一管理。 |
| **2.2. 可拖拽节点的工具栏**         | (与原计划一致) 在侧边栏中定义节点列表，并实现 `onDragStart` 事件传递节点类型。                                                                                                                                   | 用户可以从侧边栏拖动一个节点图标。                                                                            |                                               |
| **2.3. 画布实现节点放置**          | (与原计划一致) 在画布上实现 `onDragOver` 和 `onDrop` 事件，在 `onDrop` 中调用 `useFlowStore` 的 `addNode` action 来创建新节点。                                                                                | 从侧边栏拖拽的节点能成功在画布上创建。                                                                          |                                               |
| **2.4. 创建自定义节点**           | 1. (与原计划一致) 创建 `components/nodes` 目录及各类自定义节点组件。 2. **优化数据更新**: 在节点内部的输入框 `onChange` 事件中，直接调用 `useFlowStore` 的 `updateNodeParameter(nodeId, 'paramName', value)` action 。           | 3. 在所有可交互的非拖拽元素上（如输入框、按钮）添加 `className="nodrag"`，防止误触拖拽 。                                    | 画布上能渲染出带有输入框的自定义节点，修改输入框内容能实时更新全局状态。          |
| **2.5. 属性检查器与数据交互**        | (与原计划一致) 属性检查器根据 `useFlowStore` 中的 `selectedNode` 动态渲染，并双向绑定数据。                                                                                                                    | 点击节点，右侧面板显示其详细信息并可编辑，修改后画布实时同步。                                                              |                                               |
| **2.6. 完善画布交互**            | (与原计划一致) 实现节点的连接、删除等功能，所有操作均通过调用 Store 中的 actions 完成。                                                                                                                              | 用户可以自由地连接、删除节点和边。                                                                            |                                               |
| **2.7. 阶段提交**              | 1. `git add.` 2. `git commit -m "Feat: Phase 2 - Implement frontend visual modeling with Zustand"`                                                                                 | 完成第二阶段的代码提交。                                                                                 |                                               |
