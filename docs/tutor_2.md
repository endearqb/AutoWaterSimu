**UDM（矩阵驱动 + 可视化画布）是主角**，ASM 只作为“对照案例/迁移示例”。这样写教程的关键不是把 ASM 讲透，而是把你的 **UDM 编译链路（图 → 矩阵/速率 → ODE/DAE → 求解 → 校验/排错）**讲成一套可复用的方法论与操作规范。

下面是一套“UDM-first”的教程骨架：**核心叙事主线、章节重排、每章产出物、以及 ASM 应该怎么出现才不喧宾夺主**。

---

## 一、UDM-first 教程的主线（你要反复强调的“心智模型”）

你整套教程可以围绕这 6 句话展开（每章都能落回其中一两句）：

1. **画布不是画图工具，是模型编译器的前端。**
2. **UDM 的本体是：状态向量 x、过程速率向量 r(x, u, θ)、化学计量矩阵 S。**
3. **仿真就是：dx/dt = S · r + f_flow(x, Q) + f_ctrl(u) + f_ext。**
4. **“能跑”不等于“可信”，可信靠：单位一致 + 守恒检查 + 极限工况 + 可诊断的错因库。**
5. **从简单到复杂的唯一正确路径：先最小闭环跑通，再逐步加过程/状态/控制。**
6. **ASM 只是一个预置库（process pack），UDM 是生成与扩展机制。**

---

## 二、章节结构重排：从“UDM 编译链”出发，而不是从 ASM 出发

### Part A：UDM 的语言（让用户会“表达模型”）

**第 1 章：UDM 是什么——从画布到方程的一次编译**

* 产出：一张“编译管线图”（Graph → IR → ODE → Solver → Report）
* 最小例子：1 状态 1 过程 1 流入/流出

**第 2 章：状态、过程、参数、输入 u——四类对象的边界**

* 产出：UDM 对象字典（State/Process/Param/Input 的命名与单位规范）
* 诊断题：把“进水浓度”误当状态导致的异常

**第 3 章：矩阵 S（化学计量）——符号、方向、单位一次说清**

* 产出：你平台的“矩阵填写规则 + 自动检查规则”
* 最小例子：2 状态 × 2 过程的小矩阵（含一个反例）

**第 4 章：速率 r 的写法——Monod/抑制/开关/饱和/裁剪的工程范式**

* 产出：速率函数模板（含非负截断、上限、温度修正接口）
* 诊断题：μ 时间单位错引发的 24 倍偏差

### Part B：画布语义（让用户会“画对图”）

**第 5 章：流体/物料/信号三种连线语义（必须区分）**

* 产出：Edge 类型规范（flow edge vs mass edge vs signal edge）
* 诊断题：把控制信号当流量边导致守恒被破坏

**第 6 章：节点类型与作用域：池、分离、混合器、控制器、外部模块**

* 产出：节点 catalog（每个节点的输入/输出/约束）
* 最小例子：CSTR + 分流 + 回流（闭环）

**第 7 章：从画布生成方程：IR（中间表示）长什么样**

* 产出：一份“UDM-IR 的最小 JSON 结构”（你教程里最关键的 reference）
* 诊断题：循环依赖/拓扑错误如何在 IR 层暴露

### Part C：可信性与排错（让用户“用得起来”）

**第 8 章：单位体系与自动维度检查（UDM 的第一道闸）**

* 产出：单位白名单 + 自动换算策略 + 常见错误对照表

**第 9 章：守恒检查与极限工况（UDM 的第二道闸）**

* 产出：4 类快速自检：

  * 无反应极限（r=0）
  * 无流动极限（Q=0）
  * 稳态一致性（平衡）
  * 总量守恒（选定守恒量）

**第 10 章：数值稳定与“爆炸曲线”定位（第三道闸）**

* 产出：排错 SOP（先步长→再速率上限→再矩阵符号→再边界）
* 诊断题：负浓度/NaN 的 5 分钟定位法

### Part D：扩展与复用（让用户“越用越强”）

**第 11 章：UDM 过程库（process pack）机制——ASM 只在这里出现一次**

* 产出：过程库的接口规范（输入、输出、参数、默认范围、引用的状态集合）
* ASM 的出现方式：作为“官方示例过程库”，展示“如何被 UDM 托管”，而不是教材主线

**第 12 章：自定义过程/自定义状态：从矩阵到 UI 自动生成**

* 产出：

  * 自动抽取变量/参数规则
  * 参数范围引导规则（硬边界 vs 软先验）
  * UI 表单生成规则（单位、提示、默认值）

**第 13 章：校准与敏感性——给 UDM 交付一份可解释报告**

* 产出：校准最小闭环（目标函数、参数子集、顺序、停止准则）

**第 14 章：版本化与可复用资产：模板、场景、参数集、审计**

* 产出：模型包结构（model.json + params.json + scenario.json + report.md）

> 你会发现：ASM 只作为 **“过程库的一个 pack + 对照迁移例子”**出现；主线永远是“UDM 的表达、编译、校验、扩展”。

---

## 三、ASM 应该怎么“只做示例但很有用”

我建议 ASM 的出场遵守三条铁律：

1. **ASM 不作为章节组织原则**：不要“先讲 ASM1 再讲 ASM2d”。
2. **ASM 只作为 process pack 的例子**：展示“一个成熟库如何被你的 UDM 接管”。
3. **ASM 只承担两类示范任务**：

   * 示范“复杂库也能用 UDM 方式表达/校验/扩展”
   * 示范“从 ASM 子集 → 业务定制”的迁移路径（删状态、合并过程、加控制）

这样读者会自然把 ASM 当成“你系统里的一套现成积木”，而不是“必须先背完的教科书”。

---

## 四、你每章都应该交付的“可复用工件”（让教程像工程手册）

每章末尾固定给 4 个东西，读者会非常买账，也更利于你做产品化：

1. **本章最小模型（JSON/截图/参数表）**
2. **本章 Lint 规则新增项**（例如：单位、符号、拓扑、非负性、守恒）
3. **诊断题：坏模型 + 期待现象 + 定位路径**
4. **错因库：症状 → 可能原因 → 检查项 → 修复动作**

这套结构会把你的 5 个指标（直觉/过程/分层/反馈/知识网络）自动“嵌进去”，而且特别贴合 UDM 产品形态。
