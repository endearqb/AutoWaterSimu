# ASM 多时段边参数输入：开发排期版（一期）

版本：v1.0  
日期：2026-02-12  
基线文档：  
- `docs/asm_multi_period_edge_input_requirement_2026-02-12.md`  
- `docs/asm_multi_period_edge_input_api_and_tasks_2026-02-12.md`

## 1. 排期假设
- 计划起点：2026-02-13（周五）
- 人力基线：后端 1 人 + 前端 1 人 + 联调/测试 1 人（可兼职）
- 范围固定为一期，不纳入周期模板能力
- 若出现 `core.py` 分段求解复杂度超预估，优先保证“无时段兼容不回归 + 两段阶跃可用”

## 2. 里程碑（基线版）
| 里程碑 | 日期 | 交付结果 | 门禁 |
|---|---|---|---|
| M0 方案冻结 | 2026-02-13 | 字段契约与排期确认 | 产品/研发共同确认 |
| M1 接口与数据层完成 | 2026-02-20 | 后端校验+转换层、前端 store 导入导出支持 | API 可接收并保存 `timeSegments` |
| M2 计算与配置打通 | 2026-02-27 | 分段串联求解 + 前端时段编辑提交流程 | 两段阶跃用例可跑通 |
| M3 可视化与回归完成 | 2026-03-06 | 分割线/注记开关 + 回归通过 | QA 核心用例通过 |
| M4 发布候选 | 2026-03-10 | 修复收尾 + RC 包 | 类型检查/测试/回归全部通过 |

## 3. 周度排期（基线版）

### W0（2026-02-13）
- 任务：
  - 冻结接口字段、错误码、结果增强字段
  - 拆分分支与责任人
- 对应任务包：
  - FE-01/02 设计确认
  - BE-01/02 设计确认

### W1（2026-02-16 ~ 2026-02-20）
- 后端：
  - BE-01 时段模型与校验器
  - BE-02 ASM1/ASM1Slim/ASM3 路由接入校验
  - BE-03 转换层支持时段覆盖映射
- 前端：
  - FE-01 时段类型与校验工具
  - FE-02 store 扩展 `timeSegments` 状态/CRUD
  - FE-03 导入导出透传 `timeSegments`
- 周目标：
  - 能创建包含 `timeSegments` 的任务并成功入库

### W2（2026-02-23 ~ 2026-02-27）
- 后端：
  - BE-04 `core.py` 分段串联求解（边界续算、结果拼接）
- 前端：
  - FE-04 仿真面板“时段计划”UI
  - FE-05 提交前校验与错误提示
- 周目标：
  - 两段工况（0-12h / 12-24h）可端到端得到差异化结果

### W3（2026-03-02 ~ 2026-03-06）
- 后端：
  - BE-05 结果增强字段（`segment_markers`、`parameter_change_events`）
  - BE-06 服务层日志收敛（`print` -> `logging`）
- 前端：
  - FE-06 图表分割线/注记开关与展示
  - FE-07 i18n 文案补齐
- 测试联调：
  - QA-01 ~ QA-06 全量执行
- 周目标：
  - 功能、显示、兼容性全部可验收

### W4（2026-03-09 ~ 2026-03-10）
- 收尾：
  - 缺陷修复与回归
  - OpenAPI client 更新、`tsc` 校验
  - 发布候选版本确认
- 周目标：
  - 进入可发布状态（RC）

## 4. 关键依赖与并行策略
- 关键路径：`BE-04` 分段求解实现 -> `BE-05` 结果增强 -> `FE-06` 图表标注
- 可并行：
  - W1 前后端可并行（字段契约已冻结前提）
  - W2 FE-04/05 与 BE-04 并行，联调时只对接核心接口
  - W3 FE-07 与 QA 可并行

## 5. 验收计划（按时间点）
| 时间点 | 验收项 | 标准 |
|---|---|---|
| 2026-02-20 | 接口验收 | `timeSegments` 可传、可存、可回读 |
| 2026-02-27 | 计算验收 | 分段边界生效，时间序列连续 |
| 2026-03-06 | 功能验收 | 图表开关可用，非法输入拦截正确 |
| 2026-03-10 | 发布验收 | 无时段回归一致，类型检查与测试通过 |

## 6. 风险与缓冲
- 风险 R1：`core.py` 分段求解实现复杂度高于预期  
  - 预案：先交付“两段阶跃 + 全量兼容”，再扩展到多段优化
- 风险 R2：结果图注记信息不足  
  - 预案：先落 `segment_markers`，注记字段最小可用
- 风险 R3：历史任务回显丢字段  
  - 预案：优先完成 FE-03 与 `jobs/{id}/input-data` 回放回归

## 7. 加速版（可选）
若增加 1 名前端（共 2 FE）：
- FE-06（图表）提前到 W2 后半并行开发
- 总工期可由 4 周压缩到约 3.5 周  
  - 预计 RC 时间从 2026-03-10 提前到 2026-03-06 ~ 2026-03-07
